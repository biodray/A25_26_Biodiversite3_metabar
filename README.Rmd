---
title: "A25_26_Biodiversite1"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# Données initiales
source(file.path(here::here(), "01_Code", "Functions", "get.value.R"))
library(tidyverse)
#library(ggforce)

LOCUS <- stringr::str_split(get.value("Loci", file = file.path(here::here(), "Options.txt")), pattern = ";")[[1]]

#LOCUS <- c("12S160", "MiFishU", "COIB1", "MiDeca")

SUBGROUP <- stringr::str_split(get.value("group.metabaR", file = file.path(here::here(), "Options.txt")), pattern = ";")[[1]]

data.info <- readr::read_csv(file.path(here::here(), "00_Data", "00_FileInfos", "SeqInfo.csv") )

data.info <- data.info %>% mutate(Sample_type = factor(Sample_type, levels = c("ECH", "POOL", "FNC", "SNC", "FNC_SNC", "SNC_FNC", "ENC", "PNC", "MNC", "PPC", "MPC", "MPC_High", "MPC_Low")))

bioinfo.path <- getwd()

```

__Main author:__  Audrey Bourret         
__Affiliation:__  Fisheries and Oceans Canada (DFO)   
__Group:__        Laboratory of genomics   
__Location:__     Maurice Lamontagne Institute, Mont-Joli, Québec, Canada  
__Affiliated publication:__ 
__Contact:__      e-mail: audrey.bourret@dfo-mpo.gc.ca 


- [Description](#description)
- [Status](#status)
- [Contents](#contents)
- [Methods](#methods)
- [Supplementary results](#supplementary-results)
- [Requirements](#requirements)

## Description

Repository of an analysis using the MLI metabarcoding pipeline.

**Table 1: Project and loci covered by this repository.**

```{r echo=FALSE, message=FALSE, warning=FALSE}
data.info %>% 
    dplyr::filter(ID_subproject %in% SUBGROUP) %>% 
  group_by(ID_subproject, Loci) %>% 
  summarise(N = n()) %>% pivot_wider(names_from = Loci, values_from = N) %>% 
   knitr::kable()

```

## Status
Ongoing-improvements

## Contents

### Folder structure

    .
    ├── OO_Data     # Folder containing data used for the analyses, and final files (ESVtable, MOTUs infos) 
    ├── 01_Code     # R scripts  
    ├── 02_Results  # Main results
    ├── 03_Rapport  # Automatic reports and associated datasets
    └── README.md

### List of reports produced

These reports are within the **03_Rapport** folder:

```{r echo=FALSE, message=FALSE, warning=FALSE}
print(list.files("03_Rapport/", pattern = "*.pdf"))

```

## Methods

<img src="Pipeline.png" alt="Pipeline"/>

## Supplementary results

| <img src="02_Results/02_Filtrations/Cutadapt_prop_multiplex.png"> |
|:--:| 
| **Figure 1** Proportion of reads recovered for each loci. |

| <img src="02_Results/02_Filtrations/ESV_length.png"> |
|:--:| 
| **Figure 2** Pre-filtration ESV length. |


## Requirements

Analysis were run on a server, and large files should be temporary find at **`r bioinfo.path`** prior to moving on a permanent location on the NAS.

*This github readme was generated by knitting the README.Rmd from
Rstudio.*